# ğŸ”§ æ•…éšœæ’æŸ¥æŒ‡å—

## é—®é¢˜ 1ï¼šæ‰¾ä¸åˆ° Atlas ä¹¦ç­¾æ–‡ä»¶

### ç—‡çŠ¶
```
âŒ æœªæ‰¾åˆ° Atlas ä¹¦ç­¾æ–‡ä»¶
è¯·æ‰‹åŠ¨è®¾ç½® Atlas ä¹¦ç­¾è·¯å¾„ï¼Œå¯èƒ½çš„ä½ç½®ï¼š
```

### è§£å†³æ–¹æ¡ˆ

#### æ–¹æ³• 1ï¼šæ‰‹åŠ¨æŸ¥æ‰¾ Atlas ä¹¦ç­¾ä½ç½®

```bash
# æœç´¢å¯èƒ½çš„ Atlas ç›®å½•
find ~/Library/Application\ Support -name "*atlas*" -type d 2>/dev/null

# æˆ–è€…æœç´¢ OpenAI ç›¸å…³ç›®å½•
find ~/Library/Application\ Support -name "*openai*" -type d 2>/dev/null

# æœç´¢æ‰€æœ‰ Bookmarks æ–‡ä»¶
find ~/Library/Application\ Support -name "Bookmarks" 2>/dev/null
```

#### æ–¹æ³• 2ï¼šä¿®æ”¹è„šæœ¬é…ç½®

1. æ‰¾åˆ° Atlas ä¹¦ç­¾æ–‡ä»¶çš„å®é™…ä½ç½®
2. ç¼–è¾‘ `sync_bookmarks.py`ï¼š

```bash
nano sync_bookmarks.py
```

3. æ‰¾åˆ°è¿™éƒ¨åˆ†ä»£ç ï¼ˆå¤§çº¦åœ¨ç¬¬ 14-18 è¡Œï¼‰ï¼š

```python
atlas_paths = [
    Path.home() / "Library/Application Support/Atlas/Default/Bookmarks",
    Path.home() / "Library/Application Support/com.openai.atlas/Default/Bookmarks",
    Path.home() / "Library/Application Support/OpenAI/Atlas/Bookmarks",
]
```

4. æ·»åŠ ä½ æ‰¾åˆ°çš„å®é™…è·¯å¾„ï¼š

```python
atlas_paths = [
    Path.home() / "ä½ çš„å®é™…è·¯å¾„/Bookmarks",  # æ·»åŠ è¿™è¡Œ
    Path.home() / "Library/Application Support/Atlas/Default/Bookmarks",
    # ... å…¶ä»–è·¯å¾„
]
```

5. ä¿å­˜å¹¶é‡æ–°è¿è¡Œ

---

## é—®é¢˜ 2ï¼šæƒé™é”™è¯¯

### ç—‡çŠ¶
```
Permission denied
æˆ–è€…
OSError: [Errno 13] Permission denied
```

### è§£å†³æ–¹æ¡ˆ

```bash
# èµ‹äºˆè„šæœ¬æ‰§è¡Œæƒé™
chmod +x ~/cursor/æ—¥å¸¸æé—®/bookmark-sync/*.sh
chmod +x ~/cursor/æ—¥å¸¸æé—®/bookmark-sync/*.py

# æ£€æŸ¥ä¹¦ç­¾æ–‡ä»¶æƒé™
ls -l ~/Library/Application\ Support/Google/Chrome/Default/Bookmarks

# å¦‚æœéœ€è¦ï¼Œä¿®å¤æƒé™
chmod 644 ~/Library/Application\ Support/Google/Chrome/Default/Bookmarks
```

---

## é—®é¢˜ 3ï¼šåŒæ­¥åæµè§ˆå™¨æ²¡æœ‰æ˜¾ç¤ºæ›´æ–°

### ç—‡çŠ¶
è¿è¡ŒåŒæ­¥è„šæœ¬æ˜¾ç¤ºæˆåŠŸï¼Œä½†æµè§ˆå™¨ä¸­çœ‹ä¸åˆ°æ–°ä¹¦ç­¾

### è§£å†³æ–¹æ¡ˆ

1. **å®Œå…¨é€€å‡ºæµè§ˆå™¨**ï¼ˆä¸æ˜¯å…³é—­çª—å£ï¼‰
   - macOS: `Cmd + Q`
   - æˆ–åœ¨èœå•æ é€‰æ‹©"é€€å‡º"

2. **ç­‰å¾… 2-3 ç§’**

3. **é‡æ–°æ‰“å¼€æµè§ˆå™¨**

4. **æ£€æŸ¥ä¹¦ç­¾**

**æ³¨æ„ï¼š** æµè§ˆå™¨ä¼šç¼“å­˜ä¹¦ç­¾ï¼Œå¿…é¡»å®Œå…¨é‡å¯æ‰èƒ½é‡æ–°è¯»å–æ–‡ä»¶ã€‚

---

## é—®é¢˜ 4ï¼šPython å‘½ä»¤æ‰¾ä¸åˆ°

### ç—‡çŠ¶
```
python3: command not found
```

### è§£å†³æ–¹æ¡ˆ

#### æ£€æŸ¥ Python æ˜¯å¦å®‰è£…
```bash
which python3
python3 --version
```

#### å¦‚æœæœªå®‰è£…ï¼Œä½¿ç”¨ Homebrew å®‰è£…
```bash
# å®‰è£… Homebrewï¼ˆå¦‚æœè¿˜æ²¡æœ‰ï¼‰
/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"

# å®‰è£… Python
brew install python3
```

---

## é—®é¢˜ 5ï¼šå®šæ—¶ä»»åŠ¡æ²¡æœ‰è¿è¡Œ

### ç—‡çŠ¶
è®¾ç½®äº†è‡ªåŠ¨åŒæ­¥ï¼Œä½†ä¹¦ç­¾æ²¡æœ‰è‡ªåŠ¨æ›´æ–°

### æ’æŸ¥æ­¥éª¤

#### 1. æ£€æŸ¥ä»»åŠ¡æ˜¯å¦å·²åŠ è½½
```bash
launchctl list | grep bookmarksync
```

åº”è¯¥çœ‹åˆ°ç±»ä¼¼è¾“å‡ºï¼š
```
12345  0  com.bookmarksync
```

#### 2. æŸ¥çœ‹ä»»åŠ¡æ—¥å¿—
```bash
tail -50 ~/bookmark-sync-backups/launchd.log
tail -50 ~/bookmark-sync-backups/launchd.error.log
```

#### 3. æ‰‹åŠ¨è§¦å‘ä»»åŠ¡
```bash
launchctl start com.bookmarksync
```

#### 4. é‡æ–°åŠ è½½ä»»åŠ¡
```bash
launchctl unload ~/Library/LaunchAgents/com.bookmarksync.plist
launchctl load ~/Library/LaunchAgents/com.bookmarksync.plist
```

#### 5. æ£€æŸ¥ plist æ–‡ä»¶
```bash
plutil -lint ~/Library/LaunchAgents/com.bookmarksync.plist
```

---

## é—®é¢˜ 6ï¼šJSON è§£æé”™è¯¯

### ç—‡çŠ¶
```
JSONDecodeError: Expecting value
æˆ–è€…
json.decoder.JSONDecodeError
```

### åŸå› 
ä¹¦ç­¾æ–‡ä»¶å¯èƒ½å·²æŸå

### è§£å†³æ–¹æ¡ˆ

#### 1. ä»å¤‡ä»½æ¢å¤
```bash
# æŸ¥çœ‹å¤‡ä»½æ–‡ä»¶
ls -lt ~/bookmark-sync-backups/

# æ¢å¤æœ€è¿‘çš„å¤‡ä»½
cp ~/bookmark-sync-backups/chrome_bookmarks_æœ€æ–°æ—¶é—´æˆ³.json \
   ~/Library/Application\ Support/Google/Chrome/Default/Bookmarks
```

#### 2. ä»æµè§ˆå™¨é‡æ–°å¯¼å‡ºä¹¦ç­¾
- Chrome: ä¹¦ç­¾ç®¡ç†å™¨ â†’ å¯¼å‡ºä¹¦ç­¾ä¸º HTML
- Atlas: ç±»ä¼¼æ“ä½œ
- ç„¶åé‡æ–°å¯¼å…¥

---

## é—®é¢˜ 7ï¼šåŒæ­¥åä¹¦ç­¾ä¸¢å¤±

### ç—‡çŠ¶
åŒæ­¥åæŸäº›ä¹¦ç­¾ä¸è§äº†

### ç´§æ€¥æ¢å¤æ­¥éª¤

```bash
# 1. ç«‹å³åœæ­¢è‡ªåŠ¨åŒæ­¥
launchctl unload ~/Library/LaunchAgents/com.bookmarksync.plist

# 2. æŸ¥çœ‹å¤‡ä»½
ls -lt ~/bookmark-sync-backups/

# 3. æ¢å¤åˆ°åŒæ­¥å‰çš„çŠ¶æ€
# Chrome æ¢å¤
cp ~/bookmark-sync-backups/chrome_bookmarks_æœ€è¿‘æ—¶é—´æˆ³.json \
   ~/Library/Application\ Support/Google/Chrome/Default/Bookmarks

# Atlas æ¢å¤  
cp ~/bookmark-sync-backups/atlas_bookmarks_æœ€è¿‘æ—¶é—´æˆ³.json \
   ~/Library/Application\ Support/Atlas/Default/Bookmarks

# 4. é‡å¯æµè§ˆå™¨éªŒè¯
```

### é¢„é˜²æªæ–½
- è„šæœ¬ä¼šè‡ªåŠ¨å¤‡ä»½ï¼Œæ¯æ¬¡åŒæ­¥å‰éƒ½ä¼šåˆ›å»ºå¤‡ä»½
- å»ºè®®ä¿ç•™è‡³å°‘æœ€è¿‘ 10 ä¸ªå¤‡ä»½æ–‡ä»¶
- å®šæœŸæ‰‹åŠ¨å¯¼å‡ºä¹¦ç­¾ä½œä¸ºé¢å¤–å¤‡ä»½

---

## é—®é¢˜ 8ï¼šCPU å ç”¨è¿‡é«˜

### ç—‡çŠ¶
åŒæ­¥æ—¶ç³»ç»Ÿå˜æ…¢

### å¯èƒ½åŸå› 
ä¹¦ç­¾æ•°é‡éå¸¸å¤§ï¼ˆæ•°ä¸‡æ¡ï¼‰

### è§£å†³æ–¹æ¡ˆ
```bash
# å¢åŠ åŒæ­¥é—´éš”æ—¶é—´
nano ~/Library/LaunchAgents/com.bookmarksync.plist

# ä¿®æ”¹ StartInterval
# ä» 3600 (1å°æ—¶) æ”¹ä¸º 7200 (2å°æ—¶) æˆ–æ›´é•¿
```

---

## é—®é¢˜ 9ï¼šæ–‡ä»¶é”å®šé”™è¯¯

### ç—‡çŠ¶
```
OSError: [Errno 35] Resource temporarily unavailable
```

### åŸå› 
æµè§ˆå™¨æ­£åœ¨ä½¿ç”¨ä¹¦ç­¾æ–‡ä»¶

### è§£å†³æ–¹æ¡ˆ
1. å…³é—­æ‰€æœ‰ Chrome å’Œ Atlas çª—å£
2. ç­‰å¾… 5 ç§’
3. é‡æ–°è¿è¡ŒåŒæ­¥è„šæœ¬

---

## é—®é¢˜ 10ï¼šæ—¥å¿—æ–‡ä»¶è¿‡å¤§

### ç—‡çŠ¶
`~/bookmark-sync-backups/` å ç”¨ç©ºé—´è¿‡å¤§

### æ¸…ç†æ–¹æ³•

```bash
# æŸ¥çœ‹ç›®å½•å¤§å°
du -sh ~/bookmark-sync-backups/

# åªä¿ç•™æœ€è¿‘ 30 å¤©çš„å¤‡ä»½
find ~/bookmark-sync-backups/ -name "*.json" -mtime +30 -delete

# æ¸…ç†æ—§æ—¥å¿—ï¼ˆä¿ç•™æœ€è¿‘ 1000 è¡Œï¼‰
tail -1000 ~/bookmark-sync-backups/sync.log > /tmp/sync.log.tmp
mv /tmp/sync.log.tmp ~/bookmark-sync-backups/sync.log
```

---

## è·å–å¸®åŠ©

å¦‚æœä»¥ä¸Šæ–¹æ³•éƒ½æ— æ³•è§£å†³é—®é¢˜ï¼š

1. **æŸ¥çœ‹å®Œæ•´æ—¥å¿—**
   ```bash
   cat ~/bookmark-sync-backups/sync.log
   ```

2. **è¿è¡Œè¯Šæ–­å‘½ä»¤**
   ```bash
   python3 -c "
   from pathlib import Path
   chrome = Path.home() / 'Library/Application Support/Google/Chrome/Default/Bookmarks'
   print(f'Chrome ä¹¦ç­¾å­˜åœ¨: {chrome.exists()}')
   print(f'Chrome ä¹¦ç­¾å¤§å°: {chrome.stat().st_size if chrome.exists() else 0} bytes')
   "
   ```

3. **æ‰‹åŠ¨å¤‡ä»½å½“å‰çŠ¶æ€**
   ```bash
   mkdir -p ~/bookmark-backup-emergency
   cp ~/Library/Application\ Support/Google/Chrome/Default/Bookmarks \
      ~/bookmark-backup-emergency/chrome-$(date +%Y%m%d-%H%M%S).json
   ```

4. **è”ç³»å¼€å‘è€…**ï¼Œæä¾›ï¼š
   - é”™è¯¯æ—¥å¿—å†…å®¹
   - ç³»ç»Ÿä¿¡æ¯ (`sw_vers`)
   - Python ç‰ˆæœ¬ (`python3 --version`)
   - ä¹¦ç­¾æ–‡ä»¶å¤§å°

---

## é¢„é˜²æ€§æ£€æŸ¥æ¸…å•

å®šæœŸè¿è¡Œè¿™äº›æ£€æŸ¥ï¼Œç¡®ä¿åŒæ­¥æ­£å¸¸ï¼š

- [ ] æ£€æŸ¥å®šæ—¶ä»»åŠ¡çŠ¶æ€ (`launchctl list | grep bookmarksync`)
- [ ] æŸ¥çœ‹æœ€è¿‘çš„åŒæ­¥æ—¥å¿— (`tail ~/bookmark-sync-backups/sync.log`)
- [ ] éªŒè¯å¤‡ä»½æ–‡ä»¶å­˜åœ¨ (`ls ~/bookmark-sync-backups/`)
- [ ] ç¡®è®¤ç£ç›˜ç©ºé—´å……è¶³ (`df -h ~`)
- [ ] æµ‹è¯•æ‰‹åŠ¨åŒæ­¥ (`./run_sync.sh`)

---

**è®°ä½ï¼šè„šæœ¬ä¼šè‡ªåŠ¨å¤‡ä»½ï¼Œå³ä½¿å‡ºé”™ä¹Ÿå¯ä»¥æ¢å¤ï¼** ğŸ›¡ï¸

